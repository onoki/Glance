You are continuing development of the app “glance”.

Current capabilities:
- Photino desktop app
- ASP.NET Core backend
- Vue UI
- Rich-text editor with images
- SQLite persistence with migrations
- Multi-instance sync
- Dashboard, History, Search, Recurrence fully implemented

DO NOT BREAK EXISTING FUNCTIONALITY.

==================================================
AUTHORITATIVE DOCUMENTS (DO NOT MODIFY)
==================================================

- docs/architecture.md
- docs/requirements.feature
- docs/api.md
- docs/schema.sql
- docs/migrations/*

==================================================
GOAL: ITERATION 8
==================================================

Add **data safety, recovery, and maintenance features** that increase trust
and robustness without changing core behavior.

This iteration introduces:
- Manual and automatic backups
- Startup corruption checks and recovery
- Search reindexing
- Attachment garbage collection
- Global search shortcut
- Non-blocking warnings for scale risks

==================================================
BACKUP FUNCTIONALITY (MANDATORY)
==================================================

1) Manual backup
- Add a “Backup now” button in the Settings view.
- Clicking the button creates a full backup of app data.
- Backups are compressed and saved to a single file (including all working database and attachment files), named based on the timestamp (e.g. glance_backup_YYYY-MM-DD_HHMM).
    - Keep the folder structure within the single file, so that it is easy to know where to restore the backup files manually.

2) Automatic backup
- Automatically create a backup when:
  - the app is started on a new calendar day, OR
  - the day changes while the app is running
- Automatic backup must behave identically to “Backup now”.

Backup requirements:
- Use SQLite backup API (not file copy).
- Include:
  - SQLite database
  - attachments folder
- Write backups to:
  app/backups/YYYY-MM-DD-HHMMSS/
- Log success or failure.

==================================================
STARTUP DATA INTEGRITY CHECK (MANDATORY)
==================================================

On application startup:

- Open SQLite in a safe mode.
- Run a lightweight integrity check:
  - PRAGMA integrity_check;
- If corruption is detected:
  - log the error
  - attempt recovery using SQLite recovery mechanism if possible
  - if recovery fails:
    - notify the user via a clear warning
    - do NOT crash the app

Do not introduce blocking dialogs; warnings are sufficient.

==================================================
SEARCH REINDEXING (MANDATORY)
==================================================

Add a “Reindex search” button in the Settings view.

Behavior:
- Drops and rebuilds task_search (FTS5).
- Reindexes all tasks from title + content_json.
- Shows progress or a busy indicator.
- Safe to run multiple times.

==================================================
STARTUP / DAILY MAINTENANCE TASKS (MANDATORY)
==================================================

On app startup AND when the day changes:

1) Run recurrence generation (existing logic).
2) Run automatic backup (if new day).
3) Run search reindex IF:
   - task_search is missing OR
   - a previous reindex was interrupted.
4) Run attachment garbage collection.

==================================================
ATTACHMENT GARBAGE COLLECTION (MANDATORY)
==================================================

Garbage collection rules:
- Scan app/blobs/attachments/.
- Collect all attachment IDs referenced in any task.content_json.
- Delete attachment files that are not referenced anywhere.
- Log deleted files.
- Do NOT block UI while running GC.

GC triggers:
- App startup on a new day.
- Day change while app is running.

==================================================
SEARCH SHORTCUT (MANDATORY)
==================================================

Add a global keyboard shortcut:
- Ctrl+F (Cmd+F on macOS)

Behavior:
- Navigates to the Search tab.
- Focuses the search input.
- Does NOT override editor-level find functionality inside the editor.

==================================================
WARNINGS (MANDATORY, NON-BLOCKING)
==================================================

Add soft warnings (NO hard limits) for scale-related risks.

Examples:
- Large number of tasks
- Large database size
- Large number of attachments

Warning behavior:
- Displayed at the top of the current page.
- Dismissable by the user.
- Re-appears on next app launch.
- Does NOT prevent usage.

Exact thresholds may be approximate and heuristic.

==================================================
MULTI-INSTANCE BEHAVIOR
==================================================

- Backups, reindexing, and GC must be safe if two instances are running.
- Last-write-wins is acceptable.
- Duplicate backups are acceptable.
- Data loss is not acceptable.

==================================================
NON-GOALS (DO NOT IMPLEMENT)
==================================================

- Backup restore UI
- Scheduling backups beyond daily
- Configurable warning thresholds
- Sync or cloud storage
- UI theming changes

==================================================
DELIVERABLES
==================================================

- Manual and automatic backups working.
- Startup corruption check and graceful recovery behavior.
- Search reindex button working.
- Attachment garbage collection working.
- Ctrl+F navigates to Search.
- Warnings display correctly and persist across launches.
- Brief notes describing:
  - backup strategy
  - corruption handling approach
  - GC reference detection method

Proceed by implementing backend maintenance utilities first,
then Settings UI actions,
then keyboard shortcut,
then warnings UI.
Do not refactor unrelated code.
