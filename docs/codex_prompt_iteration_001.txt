You are implementing a local-first desktop application using:

- Photino.NET (desktop host)
- ASP.NET Core (local-only backend)
- Vue (frontend UI)
- SQLite (file-based persistence, WAL mode)

Solution / project names: Glance.sln, Glance.Server, Glance.Desktop (or similar). This is mostly cosmetics, but it prevents Codex from generating generic names you’ll later rename.
Window title: Photino window title should be “Glance”.
Executable name: glance (lower case).

==================================================
AUTHORITATIVE DOCUMENTS (DO NOT MODIFY)
==================================================

The following files are authoritative contracts. Do NOT change their meaning,
structure, or requirements unless explicitly instructed.

- docs/architecture.md
- docs/requirements.feature
- docs/api.md
- docs/schema.sql
- docs/migrations/*

If any of these are missing at runtime, create the minimal required file,
but do NOT invent new requirements or behavior.

==================================================
GOAL: ITERATION 1 (VERTICAL SLICE)
==================================================

Implement a working skeleton of the application that satisfies these goals:

1. The application starts as a desktop app via Photino. The app's name is "Glance"
2. The backend runs as a local ASP.NET Core server (127.0.0.1).
3. The UI shows a top navigation bar with tabs:
   - Dashboard
   - History
   - Search
   - Settings
4. Only the Dashboard is functional in Iteration 1.
   - History/Search/Settings may be placeholders.
5. On the Dashboard:
   - A "New tasks" list (editable)
   - A "Main tasks" list below it (editable)
6. Users can:
   - create tasks
   - edit task title and content
   - mark tasks complete and uncomplete
7. Tasks persist in SQLite and reload correctly after restart.
8. Multi-instance behavior:
   - Two running instances sharing the same data folder
   - Edits or completion in one instance appear in the other within ~1 second

==================================================
SCOPE LIMITS (IMPORTANT)
==================================================

DO NOT implement the following in Iteration 1:
- recurrence logic
- history charts
- advanced category derivation
- search highlighting
- rich editor invariants enforcement
- CRDTs, locking, or real-time collaboration

For Iteration 1, the editor may be simplified:
- title: single-line text input
- content: multiline text area OR minimal ProseMirror editor
(The full editor schema will be implemented in Iteration 2.)

==================================================
DATA AND MIGRATIONS
==================================================

- SQLite database must be located at: glance/data/glance.db
- WAL mode must be enabled.
- Use schema.sql for new databases.
- Use docs/migrations/*.sql for upgrades.
- Maintain schema_migrations table.
- Skipped-version upgrades must work (e.g., 1 → 4).

==================================================
MULTI-INSTANCE CONSISTENCY MODEL
==================================================

- Last-write-wins.
- No inter-process locks.
- All writes append a row to the `changes` table.
- Backend exposes:
  GET /api/changes?since={lastId}
- UI polls approximately every 750 ms and reloads changed tasks.

==================================================
IMPLEMENTATION PLAN (FOLLOW THIS ORDER)
==================================================

1. Create a .NET solution with:
   - server project (ASP.NET Core)
   - desktop host project (Photino)
2. Desktop host responsibilities:
   - determine app root folder
   - ensure data/ and blobs/ exist
   - start backend server
   - open Photino window pointing to backend URL
3. Backend responsibilities:
   - initialize SQLite
   - apply migrations
   - expose API endpoints defined in docs/api.md
4. Frontend (Vue):
   - simple tab navigation
   - Dashboard page with two task lists
   - calls backend via fetch
   - polls /api/changes
5. Persistence:
   - implement tasks table CRUD
   - update task_search (can be stubbed initially)
   - append to changes table on every write

==================================================
DELIVERABLES
==================================================

- The app builds and runs locally.
- Clear instructions:
  - how to build UI
  - how to run the desktop app
- A short list:
  - what is implemented in Iteration 1
  - what is explicitly deferred

==================================================
QUALITY BAR
==================================================

- Correctness > completeness.
- Prefer clear, boring code.
- Avoid unnecessary abstractions.
- Add basic logging for:
  - server startup
  - database path
  - migration application
  - errors

Begin by scaffolding the solution and wiring:
Photino → ASP.NET Core → Vue → SQLite.

In development, Photino should load the UI from the Vite dev server URL; in production it should load the built UI served by the backend.
